(()=>{"use strict";const e=new function(){this.spellForm=document.querySelector(".body__form"),this.spellInput=document.querySelector(".body__form-input"),this.guardImage=document.querySelector(".user__image img"),this.statusMsg=document.querySelector(".body__form-msg"),this.scoreElem=document.querySelector(".user__score .value"),this.correctElem=document.querySelector(".body__nav-stats .correct .value"),this.inCorrectElem=document.querySelector(".body__nav-stats .incorrect .value"),this.speakButton=document.querySelector(".body__form-speak"),this.appUserSection=document.querySelector(".app-user"),this.soundCorrect=document.querySelector(".body__sound-correct"),this.soundIncorrect=document.querySelector(".body__sound-incorrect"),this.register=document.querySelector(".register"),this.registerCancelBtn=document.querySelector(".register__form-btn-cancel"),this.registerSaveBtn=document.querySelector(".register__form-btn-save"),this.registerForm=document.querySelector(".register__form"),this.registerFormNameInput=document.querySelector(".register__form-input"),this.registerFormRangeInput=document.querySelector(".register__form-word-range"),this.registerFormRangeInfo=document.querySelector(".register__form-info--range .value"),this.registerFormGenderInputs=document.querySelectorAll(".register__form-gender"),this.user=document.querySelector(".user"),this.userName=document.querySelector(".user__player"),this.userScore=document.querySelector(".user__score .value"),this.userImageContainer=document.querySelector(".user__image"),this.userImage=this.userImageContainer.querySelector("img"),this.profileSection=document.querySelector(".users"),this.profileContainer=document.querySelector(".users-content"),this.newUserBtn=document.querySelector(".users__cta .btn"),this.settingsBtn=document.querySelector(".user__nav-setting"),this.refreshBtn=document.querySelector(".user__nav-refresh")};function t(e){const t=window.speechSynthesis,r=new SpeechSynthesisUtterance("spell,"+e);r.voice=t.getVoices()[1],t.speak(r)}function r(e,t,r,s){this.id=(new Date).getTime(),this.name=e,this.gender=t,this.url="","boy"===t&&(this.url="images/heads/boy.jpg"),"girl"===t&&(this.url="images/heads/girl.jpg"),this.score=r,this.lettersPerWord=s}const n=new function(){this.sync=function(e,t){e.textContent=t},this.addClass=function(e,t){e.classList.add(t)},this.removeClass=function(e,t){e.classList.remove(t)},this.closeWidget=function(e){e.classList.remove("show")},this.openWidget=function(e){e.classList.add("show")},this.toggleSection=function(e,t){t.forEach((function(t){t.addEventListener("click",(function(){e.classList.toggle("show")}))}))},this.structureUserProfile=function(e){const t=document.createElement("figure");return t.setAttribute("data-id",e.id),document.createElement("span").classList.add("users__avatar"),t.innerHTML=`\n    <input type="checkbox" />\n    <span class="users__avatar" style="background: url(${e.url}) no-repeat center center/cover"></span>\n    <figcaption class="users__name">${e.name}</figcaption>`,t},this.clearChildren=function(e){e.innerHTML=""},this.appendToParent=function(e,t){e.appendChild(t)}},o=new function(){const e="spellzyUser",t=localStorage;this.getUser=function(){return null===t.getItem(e)?[]:JSON.parse(t.getItem(e))},this.saveUser=function(r){if(!r)return console.error("We need a user to actually save please :)");const s=this.getUser();return s.push(r),t.setItem(e,JSON.stringify(s)),console.log(r.name+" saved! :)")},this.editUser=function(r){const s=db.getUser();return s.forEach((function(e,t){r.id===e.id&&(s.splice(t,1),s.push(r))})),t.setItem(e,JSON.stringify(s)),console.log(user.name+" edited! :)")},this.deleteUser=function(e){}},i=new function(){let t=0,s=0,i=0;this.listenTo=function(e,t,r){e.addEventListener(t,r)},this.runOnStart=function(e){window.onload=e},this.syncUI=function(){n.sync(e.inCorrectElem,s),n.sync(e.correctElem,t),n.sync(e.scoreElem,i)},this.saveUser=function(t){const s=e.registerFormNameInput.value;let n=e.registerFormRangeInput.value,i="";e.registerFormGenderInputs.forEach((e=>{if(e.checked)return i=e.value})),console.log(i);const c=new r(s,i,0,n);o.saveUser(c)},this.validateAnswer=function(r,o){return String(r).toLowerCase().trim()===String(o).toLowerCase().trim()?(n.addClass(document.body,"success"),n.addClass(e.guardImage,"shake"),n.addClass(e.statusMsg,"success"),setTimeout((()=>{n.removeClass(document.body,"success"),n.removeClass(e.guardImage,"shake"),n.removeClass(e.statusMsg,"success")}),3e3),new Audio("sounds/correct.mp3").play(),t+=1,i+=10,this.syncUI(),console.log("Success! :)")):(n.addClass(document.body,"error"),n.addClass(e.statusMsg,"error"),setTimeout((()=>{n.removeClass(document.body,"error"),n.removeClass(e.statusMsg,"error")}),3e3),new Audio("sounds/incorrect.mp3").play(),s+=1,0!==i&&(i-=10),this.syncUI(),console.log("Success! :)"))},this.loadProfiles=function(){o.getUser().forEach((function(t){n.appendToParent(e.profileContainer,n.structureUserProfile(t))}))},this.selectProfile=function(t){n.sync(e.userName,t.name),n.sync(e.userScore,t.score),e.user.setAttribute("data-id",t.id),"boy"===t.gender?(e.userImage.setAttribute("src","images/boy.png"),e.userImage.style.width="65%"):e.userImage.setAttribute("src","images/girl.png")},this.toggleFullScreen=function(){document.fullscreenElement||document.documentElement.requestFullscreen()},this.editUser=function(){const t=Number(e.user.getAttribute("data-id"));o.getUser().forEach((function(e){t===e.id&&o.editUser(e)}))}},c=function(e){let t=0;return{next:()=>t<e.length?{value:e[t++],done:!1}:{value:void 0,done:!0}}}(["advance","adverse","advised","adviser","against","airline","airport","alcohol","alleged","already","ability","absence","academy","account","accused","achieve","acquire","address"]);let u=c.next().value;i.runOnStart((()=>{n.openWidget(e.profileSection),i.syncUI(),i.loadProfiles(),0===o.getUser().length&&n.openWidget(e.register)})),i.listenTo(e.refreshBtn,"click",(function(){location.reload()})),i.listenTo(document,"click",(function(){i.toggleFullScreen()})),i.listenTo(e.spellForm,"submit",(function(r){if(r.preventDefault(),!e.spellInput.value)return console.error("Please you need an input to continue :)");i.validateAnswer(e.spellInput.value,u),e.spellInput.value="",setTimeout((()=>{let e=c.next().value;u=e,t(e)}),3500)})),i.listenTo(e.registerForm,"submit",(function(t){if(t.preventDefault(),e.registerSaveBtn.getAttribute("data-state"))return i.editUser();n.saveUser((e=>o.saveUser.call(o,e)))})),i.listenTo(e.speakButton,"click",(function(){t(u)})),i.listenTo(e.registerForm,"submit",(function(t){t.preventDefault(),i.saveUser(),n.clearChildren(e.profileContainer),i.loadProfiles(),n.closeWidget(e.register)})),i.listenTo(e.registerFormRangeInput,"change",(function(){n.sync(e.registerFormRangeInfo,e.registerFormRangeInput.value)})),i.listenTo(e.profileContainer,"click",(function(t){if("checkbox"===!t.target.getAttribute("type"))return!1;o.getUser().forEach((function(r){Number(t.target.parentElement.getAttribute("data-id"))===r.id&&(i.selectProfile(r),n.closeWidget(e.profileSection))}))})),i.listenTo(e.settingsBtn,"click",(function(){o.getUser().forEach((function(t){e.registerFormNameInput.value=t.name,e.registerFormRangeInput.value=t.letterPerWord,e.registerSaveBtn.setAttribute("data-state","edit"),e.registerFormGenderInputs.forEach((function(e){e.value===t.gender&&e.checked}))}))})),n.toggleSection(e.register,[e.registerCancelBtn,e.newUserBtn,e.settingsBtn]),s})();