(()=>{"use strict";const e=new function(){this.spellForm=document.querySelector(".body__form"),this.spellInput=document.querySelector(".body__form-input"),this.guardImage=document.querySelector(".user__image img"),this.statusMsg=document.querySelector(".body__form-msg"),this.scoreElem=document.querySelector(".user__score .value"),this.correctElem=document.querySelector(".body__nav-stats .correct .value"),this.inCorrectElem=document.querySelector(".body__nav-stats .incorrect .value"),this.speakButton=document.querySelector(".body__form-speak"),this.appUserSection=document.querySelector(".app-user"),this.soundCorrect=document.querySelector(".body__sound-correct"),this.soundIncorrect=document.querySelector(".body__sound-incorrect"),this.register=document.querySelector(".register"),this.registerForm=document.querySelector(".register__form"),this.registerFormNameInput=document.querySelector(".register__form-input"),this.registerFormRangeInput=document.querySelector(".register__form-word-range"),this.registerFormRangeInfo=document.querySelector(".register__form-info--range .value"),this.registerFormGenderInputs=document.querySelectorAll(".register__form-gender"),this.user=document.querySelector(".user"),this.userName=document.querySelector(".user__player"),this.userScore=document.querySelector(".user__score .value"),this.userImageContainer=document.querySelector(".user__image"),this.userImage=this.userImageContainer.querySelector("img"),this.profileSection=document.querySelector(".users"),this.profileContainer=document.querySelector(".users-content")};function t(e){const t=window.speechSynthesis,r=new SpeechSynthesisUtterance("spell,"+e);r.voice=t.getVoices()[1],t.speak(r)}function r(e,t,r,s){this.id=(new Date).getTime(),this.name=e,this.gender=t,this.url="","boy"===t&&(this.url="images/heads/boy.jpg"),"girl"===t&&(this.url="images/heads/girl.jpg"),this.score=r,this.lettersPerWord=s}const s=new function(){this.sync=function(e,t){e.textContent=t},this.addClass=function(e,t){e.classList.add(t)},this.removeClass=function(e,t){e.classList.remove(t)},this.closeWidget=function(e){e.classList.remove("show")},this.openWidget=function(e){e.classList.add("show")},this.structureUserProfile=function(e){const t=document.createElement("figure");return t.setAttribute("data-id",e.id),document.createElement("span").classList.add("users__avatar"),t.innerHTML=`\n    <input type="checkbox" />\n    <span class="users__avatar" style="background: url(${e.url}) no-repeat center center/cover"></span>\n    <figcaption class="users__name">${e.name}</figcaption>`,t},this.appendToParent=function(e,t){e.appendChild(t)}},n=new function(){const e="spellzyUser",t=localStorage;this.getUser=function(){return null===t.getItem(e)?[]:JSON.parse(t.getItem(e))},this.saveUser=function(r){if(!r)return console.error("We need a user to actually save please :)");const s=this.getUser();return s.push(r),t.setItem(e,JSON.stringify(s)),console.log(r.name+" saved! :)")},this.editUser=function(e){},this.deleteUser=function(e){}},o=new function(){let t=0,o=0,i=0;this.listenTo=function(e,t,r){e.addEventListener(t,r)},this.runOnStart=function(e){window.onload=e},this.syncUI=function(){s.sync(e.inCorrectElem,o),s.sync(e.correctElem,t),s.sync(e.scoreElem,i)},this.saveUser=function(t){const s=e.registerFormNameInput.value;let o=e.registerFormRangeInput.value,i="";e.registerFormGenderInputs.forEach((e=>{if(e.checked)return i=e.value})),console.log(i);const c=new r(s,i,0,o);n.saveUser(c)},this.validateAnswer=function(r,n){return String(r).toLowerCase().trim()===String(n).toLowerCase().trim()?(s.addClass(document.body,"success"),s.addClass(e.guardImage,"shake"),s.addClass(e.statusMsg,"success"),setTimeout((()=>{s.removeClass(document.body,"success"),s.removeClass(e.guardImage,"shake"),s.removeClass(e.statusMsg,"success")}),3e3),new Audio("sounds/correct.mp3").play(),t+=1,i+=10,this.syncUI(),console.log("Success! :)")):(s.addClass(document.body,"error"),s.addClass(e.statusMsg,"error"),setTimeout((()=>{s.removeClass(document.body,"error"),s.removeClass(e.statusMsg,"error")}),3e3),new Audio("sounds/incorrect.mp3").play(),o+=1,0!==i&&(i-=10),this.syncUI(),console.log("Success! :)"))},this.loadProfiles=function(){n.getUser().forEach((function(t){s.appendToParent(e.profileContainer,s.structureUserProfile(t))}))},this.selectProfile=function(t){s.sync(e.userName,t.name),s.sync(e.userScore,t.score),"boy"===t.gender?(e.userImage.setAttribute("src","images/boy.png"),e.userImage.style.width="65%"):e.userImage.setAttribute("src","images/girl.png")}},i=function(e){let t=0;return{next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0}}}}(["advance","adverse","advised","adviser","against","airline","airport","alcohol","alleged","already","ability","absence","academy","account","accused","achieve","acquire","address"]);let c=i.next().value;o.runOnStart((()=>{o.syncUI(),o.loadProfiles(),s.openWidget(e.profileSection),0===n.getUser().length&&s.openWidget(e.register)})),o.listenTo(e.spellForm,"submit",(function(r){if(r.preventDefault(),!e.spellInput.value)return console.error("Please you need an input to continue :)");o.validateAnswer(e.spellInput.value,c),e.spellInput.value="",setTimeout((()=>{let e=i.next().value;c=e,t(e)}),3500)})),o.listenTo(e.registerForm,"submit",(function(e){e.preventDefault(),s.saveUser((e=>n.saveUser.call(n,e)))})),o.listenTo(e.speakButton,"click",(function(){t(c)})),o.listenTo(e.registerForm,"submit",(function(t){t.preventDefault(),o.saveUser(),o.loadProfiles(),s.closeWidget(e.register)})),o.listenTo(e.registerFormRangeInput,"change",(function(){s.sync(e.registerFormRangeInfo,e.registerFormRangeInput.value)})),o.listenTo(e.profileContainer,"click",(function(t){if("checkbox"===!t.target.getAttribute("type"))return!1;n.getUser().forEach((function(r){Number(t.target.parentElement.getAttribute("data-id"))===r.id&&(o.selectProfile(r),s.closeWidget(e.profileSection))}))}))})();